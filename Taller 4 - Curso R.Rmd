---
title: "Taller 4 - Curso R"
author: "Andrés Diaz - Yilmer Palacios"
date: "2024-05-18"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#### Cargamos librerías
```{r include=FALSE}

rm(list = ls())

librerias <- (c("rvest", "purrr","writexl","readxl","sf", "haven", "dplyr"))

if(length(setdiff(librerias, rownames(installed.packages()))) > 0){
  install.packages(setdiff(librerias, rownames(installed.packages())))}
invisible(sapply(librerias, require, character.only = TRUE,quietly = TRUE))


```


# Taller 4

## Punto 1

### 1.1 Descarguen de la página del DANE el shapefile de municipios de Colombia. Cargue este shapefile a R utilizando la librería SF y elimine San Andrés y Providencia

```{r}
# Configuramos directorio
dir <- getwd()
setwd(dir)

# Cargamos Shapefile

sf_data <- st_read(dsn= "ShapeF")
sf_data <- subset(sf_data, DPTO_CCDGO != 88)

ggplot() + geom_sf(data = sf_data)

```
### 1.2 De la pagina del CEDE descargue el Panel de Características generales de los Municipios. Mantengan las variables que contienen la palabra “pob” y las variables del PIB.

```{r}

# Cargamos el panel de caracteristicas generales
data <- read_dta("PANEL_CARACTERISTICAS_GENERALES(2022).dta") 

# Mantemos solo las variables que contienen las palabras "pob", "pib" y el año.
data2 <- data %>% select(contains("pob") | contains("pib") | starts_with("ano"))


```

### 1.3 Asignen como un nuevo dataframe de corte transversal los años 2007, 2008 y 2009 del Panel Municipal del CEDE.

```{r}

# Creamos un nuevo df solo con los años requeridos
ndata <- filter(data, ano == c("2007", "2008", "2009"))

# Corroboramos el filtro
unique(ndata$ano)

```
### 1.4 Realicen un merge del shapefile de los municipios con cada uno de los nuevos dataframes y guárdenlos como objetos separados..

```{r}



```


